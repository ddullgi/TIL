<script src="./fx.js"></script>

<!--## range

<script>
  const add = (a, b) => a + b;

  // const range = (l) => {
  //   let i = -1;
  //   let res = [];
  //   while (++i < l) {
  //     // console.log(i, "range");
  //     res.push(i);
  //   }
  //   return res;
  // };

  // console.log(range(5));
  // [0, 1, 2, 3, 4]

  // console.log(range(2));
  // [0, 1]

  var list = range(4);

  console.log(list);
  // console.log(reduce(add, list));
</script>

## 느긋한 L.range

<script>
  // const L = {};
  // L.range = function* (l) {
  //   let i = -1;
  //   while (++i < l) {
  //     // console.log(i, "L.range");
  //     yield i;
  //   }
  // };

  var list = L.range(4);

  console.log(list);
  // console.log(reduce(add, list));

  console.log(list.next());
  console.log(list.next());
  console.log(list.next());
  console.log(list.next());
</script>

<script>
  // console.clear();

  function test(name, time, f) {
    console.time(name);
    while (time--) f();
    console.timeEnd(name);
  }

  test("L.range", 10, () => reduce, L.range(10000000));
  test("range", 10, () => reduce, range(10000000));
</script>

#take
<script>
  const take = curry((limit, iter) => {
    let res = [];
    for (const a of iter) {
      res.push(a);
      if (res.length == limit) return res;
    }
    return res;
  });

  console.time("");
  go(range(10000000), take(5), reduce(add), console.log);
  console.timeEnd("");

  console.time("");
  go(L.range(10000000), take(5), reduce(add), console.log);
  console.timeEnd("");
</script>

## L.map
<script>
  // L.map = function* (f, iter) {
  //   for (const a of iter) yield f(a);
  // };

  var it = L.map((a) => a + 10, [1, 2, 3]);
  console.log(it.next());
  console.log(it.next());
  console.log(it.next());
</script>

## L.filter

<script>
  L.filter = function* (f, iter) {
    for (const a of iter) {
      if (f(a)) yield a;
    }
  };

  var it = L.filter((a) => a % 2, [1, 2, 3, 4]);
  console.log(it.next());
  console.log(it.next());
  console.log(it.next());
</script> -->

## range, map, filter, take, reduce 중첩 사용

<script>
  // console.clear();
  go(
    range(10),
    map((n) => n + 10),
    filter((n) => n % 2),
    take(2),
    console.log
  );
</script>

## L.range, L.map, L.filter, take, reduce 중첩 사용

<script>
  // console.clear();
  // const L = {};
  go(
    L.range(10),
    L.map((n) => n + 10),
    L.filter((n) => n % 2),
    take(2),
    console.log
  );
</script>
