## CJS 와 ESM의 차이

`CJS`는 Node.js의 모듈 시스템을 구현하기 위해 사용되며, 모듈을 내보낼 때 `module.exports` 객체를 사용하여 정의하고, 가져올 때는 `require()` 함수를 사용하여 가져옵니다.

`CJS`는 `require()`** 함수가 실행될 때 동기적으로 메인 스레드를 차단하고 모듈 파일을 검색하고 실행합니다. 따라서 모듈을 불러온 시점에서 객체를 전역 스코프에 복사하여 실행합니다. 이로 인해 모듈을 불러온 시점과 실행한 시점의 원본 모듈의 변경을 알 수 없습니다.

반면, `ESM`은 ECMAScript 모듈의 약자이며, `export` 문을 사용하여 정의하고 `import` 문을 사용하여 가져올 수 있습니다. `ESM`은 `import` 문이 실행될 때 비동기적으로 종속성 파일을 검색하고 다운로드합니다. 이 때 모듈은 실행되지 않습니다. 모듈의 실행은 이후 모듈에서 불러온 객체를 실행할 때 발생하며, 이 때 모듈이 비동기적으로 실행됩니다. 따라서 모듈을 불러온 시점과 실행 시점의 차이를 알 수 있습니다.

따라서 `CJS`는 서버 사이드 애플리케이션과 같이 동기적인 작업에 적합하며, `ESM`은 클라이언트 사이드 애플리케이션과 같이 비동기적인 작업에 적합합니다.

또한 `CJS`는 전역 스코프에 객체를 할당하므로 다른 모듈에서 같은 이름의 객체를 사용하는 경우 충돌이 발생할 가능성이 높습니다. 반면 `ESM`은 모듈마다 자체적인 스코프를 가지므로 이름 충돌이 발생하지 않습니다.

마지막으로, `CJS`는 코드 실행 시점에 모듈을 로드하기 때문에 순환 종속성 문제가 발생할 수 있습니다. 이러한 문제를 해결하기 위해서는 모듈을 미리 초기화하는 방식으로 해결할 수 있습니다. 반면 `ESM`은 `import` 문이 실행되는 시점에 모듈의 종속성을 로드하기 때문에 순환 종속성 문제가 발생하지 않습니다.